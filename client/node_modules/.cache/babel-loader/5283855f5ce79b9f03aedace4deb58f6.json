{"ast":null,"code":"import http from './httpService';\nimport { apiUrl } from \"../config.json\";\nimport jwtDecode from 'jwt-decode';\nconst tokenKey = \"token\";\nconst tokenAdmin = \"tokenAdmin\"; //מחזיר לנו טוקן כשנרצה לוודא אם יש טוקן\n\nexport function getJwt() {\n  return localStorage.getItem(tokenKey);\n}\nexport function logout() {\n  localStorage.removeItem(tokenKey);\n} //פותח את הטוקן כדי לקבל נתונים על היוזר\n\nexport function getCurrentUser() {\n  try {\n    const jwt = localStorage.getItem(tokenKey);\n    return jwtDecode(jwt);\n  } catch (ex) {\n    return null;\n  }\n}\nexport function getCurrentAdmin() {\n  try {\n    const jwt = localStorage.getItem(tokenAdmin);\n    return jwtDecode(jwt);\n  } catch (ex) {\n    return null;\n  }\n}\nexport async function lgout() {\n  localStorage.removeItem(tokenKey);\n}\nexport async function loginAdmin(email, password) {\n  const {\n    data\n  } = await http.post(`${apiUrl}/auth/admin`, {\n    email,\n    password\n  });\n  localStorage.setItem(tokenAdmin, data.tokenAdmin);\n}\nexport async function getUser(userId) {\n  const {\n    data\n  } = await http.get(`${apiUrl}/user`);\n}\nexport async function login(email, password) {\n  const {\n    data\n  } = await http.post(`${apiUrl}/auth`, {\n    email,\n    password\n  });\n  localStorage.setItem(tokenKey, data.token);\n}\nconst user = {\n  login,\n  getCurrentUser,\n  lgout,\n  getJwt,\n  loginAdmin,\n  getCurrentAdmin\n};\nexport default user;","map":{"version":3,"sources":["C:/Users/WIN 10/Desktop/Art-Work-git/client/src/services/userService.js"],"names":["http","apiUrl","jwtDecode","tokenKey","tokenAdmin","getJwt","localStorage","getItem","logout","removeItem","getCurrentUser","jwt","ex","getCurrentAdmin","lgout","loginAdmin","email","password","data","post","setItem","getUser","userId","get","login","token","user"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,eAAjB;AACA,SAASC,MAAT,QAAsB,gBAAtB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AAEA,MAAMC,QAAQ,GAAG,OAAjB;AACA,MAAMC,UAAU,GAAG,YAAnB,C,CAEA;;AACA,OAAO,SAASC,MAAT,GAAiB;AACpB,SAAOC,YAAY,CAACC,OAAb,CAAqBJ,QAArB,CAAP;AACH;AAGD,OAAO,SAASK,MAAT,GAAiB;AACpBF,EAAAA,YAAY,CAACG,UAAb,CAAwBN,QAAxB;AACH,C,CACD;;AACA,OAAO,SAASO,cAAT,GAAyB;AAC5B,MAAG;AACC,UAAMC,GAAG,GAAGL,YAAY,CAACC,OAAb,CAAqBJ,QAArB,CAAZ;AACA,WAAOD,SAAS,CAACS,GAAD,CAAhB;AACH,GAHD,CAIA,OAAMC,EAAN,EAAS;AACL,WAAO,IAAP;AACH;AACJ;AAED,OAAO,SAASC,eAAT,GAA0B;AAC7B,MAAG;AACC,UAAMF,GAAG,GAAGL,YAAY,CAACC,OAAb,CAAqBH,UAArB,CAAZ;AACA,WAAOF,SAAS,CAACS,GAAD,CAAhB;AACH,GAHD,CAIA,OAAMC,EAAN,EAAS;AACL,WAAO,IAAP;AACH;AACJ;AAED,OAAO,eAAeE,KAAf,GAAsB;AACzBR,EAAAA,YAAY,CAACG,UAAb,CAAwBN,QAAxB;AACH;AAGD,OAAO,eAAeY,UAAf,CAA2BC,KAA3B,EAAkCC,QAAlC,EAA4C;AAC/C,QAAM;AAACC,IAAAA;AAAD,MAAS,MAAMlB,IAAI,CAACmB,IAAL,CAAY,GAAElB,MAAO,aAArB,EAAmC;AAACe,IAAAA,KAAD;AAAQC,IAAAA;AAAR,GAAnC,CAArB;AACAX,EAAAA,YAAY,CAACc,OAAb,CAAqBhB,UAArB,EAAiCc,IAAI,CAACd,UAAtC;AAEH;AAED,OAAO,eAAeiB,OAAf,CAAwBC,MAAxB,EAA+B;AAClC,QAAM;AAACJ,IAAAA;AAAD,MAAS,MAAMlB,IAAI,CAACuB,GAAL,CAAW,GAAEtB,MAAO,OAApB,CAArB;AACH;AAED,OAAO,eAAeuB,KAAf,CAAsBR,KAAtB,EAA6BC,QAA7B,EAAuC;AAC1C,QAAM;AAACC,IAAAA;AAAD,MAAS,MAAMlB,IAAI,CAACmB,IAAL,CAAY,GAAElB,MAAO,OAArB,EAA6B;AAACe,IAAAA,KAAD;AAAQC,IAAAA;AAAR,GAA7B,CAArB;AACAX,EAAAA,YAAY,CAACc,OAAb,CAAqBjB,QAArB,EAA+Be,IAAI,CAACO,KAApC;AAEH;AAED,MAAMC,IAAI,GAAG;AACTF,EAAAA,KADS;AAETd,EAAAA,cAFS;AAGTI,EAAAA,KAHS;AAITT,EAAAA,MAJS;AAKTU,EAAAA,UALS;AAMTF,EAAAA;AANS,CAAb;AASA,eAAea,IAAf","sourcesContent":["import http from './httpService';\r\nimport { apiUrl} from \"../config.json\"\r\nimport jwtDecode from 'jwt-decode';\r\n\r\nconst tokenKey = \"token\";\r\nconst tokenAdmin = \"tokenAdmin\";\r\n\r\n//מחזיר לנו טוקן כשנרצה לוודא אם יש טוקן\r\nexport function getJwt(){\r\n    return localStorage.getItem(tokenKey);\r\n}\r\n\r\n\r\nexport function logout(){\r\n    localStorage.removeItem(tokenKey);\r\n}\r\n//פותח את הטוקן כדי לקבל נתונים על היוזר\r\nexport function getCurrentUser(){\r\n    try{\r\n        const jwt = localStorage.getItem(tokenKey);\r\n        return jwtDecode(jwt);\r\n    }\r\n    catch(ex){\r\n        return null\r\n    }\r\n}\r\n\r\nexport function getCurrentAdmin(){\r\n    try{\r\n        const jwt = localStorage.getItem(tokenAdmin);\r\n        return jwtDecode(jwt);\r\n    }\r\n    catch(ex){\r\n        return null\r\n    }\r\n}\r\n\r\nexport async function lgout(){\r\n    localStorage.removeItem(tokenKey);\r\n}\r\n\r\n\r\nexport async function loginAdmin (email, password) {\r\n    const {data} = await http.post (`${apiUrl}/auth/admin`, {email, password});\r\n    localStorage.setItem(tokenAdmin, data.tokenAdmin);\r\n   \r\n}\r\n\r\nexport async function getUser (userId){\r\n    const {data} = await http.get (`${apiUrl}/user`);\r\n}\r\n\r\nexport async function login (email, password) {\r\n    const {data} = await http.post (`${apiUrl}/auth`, {email, password});\r\n    localStorage.setItem(tokenKey, data.token);\r\n   \r\n}\r\n\r\nconst user = {\r\n    login,\r\n    getCurrentUser,\r\n    lgout,\r\n    getJwt,\r\n    loginAdmin,\r\n    getCurrentAdmin\r\n};\r\n\r\nexport default user;"]},"metadata":{},"sourceType":"module"}