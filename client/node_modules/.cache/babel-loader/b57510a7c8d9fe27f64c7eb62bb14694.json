{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\WIN 10\\\\Desktop\\\\Art-Work-git\\\\client\\\\src\\\\comps\\\\editProduct.jsx\";\nimport React from 'react';\nimport Form from './common/form';\nimport PageHeader from './common/pageHader';\nimport productService from '../services/productService';\nimport { toast } from 'react-toastify';\nimport Joi from \"joi-browser\";\nimport { Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass EditProduct extends Form {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: {\n        name: \"\",\n        price: \"\",\n        category: \"\",\n        catalogNumber: \"\",\n        age: \"\",\n        description: \"\",\n        image: \"\",\n        sale: \"\"\n      },\n      errors: {}\n    };\n    this.categoriesAr = ['ציורי הקסם', 'סרגלי הקסם', 'מדבקות הקסם', 'בניה מעץ', 'בניה מקאפה', 'מתיחת חוטים', 'מניאטורות', 'צביעה באקריליק', 'יצירות יהלומים', 'קישוטי סוכה'];\n    this.productId = \"\";\n    this.schema = {\n      name: Joi.string().min(2).max(255).required().label(\"שם המוצר\"),\n      price: Joi.number().min(1).max(100000).required().label(\"מחיר\"),\n      category: Joi.string().min(2).max(255).required().label(\"קטגוריה\"),\n      catalogNumber: Joi.string().min(1).max(2000000).required().label('מספר מק\"ט'),\n      description: Joi.string().min(2).max(1000).label(\"תאור\"),\n      sale: Joi.number().min(1).max(100000).label(\"מחיר מבצע\"),\n      age: Joi.string().min(1).max(10).label(\"גיל\"),\n      image: Joi.string().min(2).max(1000).label(\"תמונה\"),\n      tags: Joi.string().min(2).max(1000).label(\"תגיות\")\n    };\n\n    this.componentDidMount = async () => {\n      this.productId = this.props.match.params.id;\n      const {\n        data\n      } = await productService.getProduct(this.productId);\n      this.setState({\n        data: this.mapToViewModel(data)\n      });\n    };\n\n    this.doSubmit = async () => {\n      const {\n        data\n      } = this.state;\n      await productService.updateProduct(data, this.productId);\n      toast('המוצר עודכן !');\n      this.props.history.replace(`/showProduct/${data.category}`);\n    };\n  }\n\n  mapToViewModel(product) {\n    return {\n      name: product.name,\n      price: product.price,\n      category: product.category,\n      tags: product.tags,\n      age: product.age,\n      catalogNumber: product.catalogNumber.toString(),\n      description: product.description,\n      image: product.image,\n      sale: product.sale\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(PageHeader, {\n          titleText: \"\\u05E2\\u05D3\\u05DB\\u05D5\\u05DF \\u05DE\\u05D5\\u05E6\\u05E8\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 24\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row justify-content-center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-lg-6\",\n            children: /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: this.handleSubmit,\n              autoComplete: \"off\",\n              method: \"post\",\n              className: \"form-control mt-3 h2\",\n              children: [this.renderInput(\"name\", \"שם המוצר\"), this.renderInput(\"description\", \"תאור\"), this.renderInput(\"catalogNumber\", 'מספר מק\"ט', \"number\"), this.renderSelect(\"category\", \"קטגוריה\", this.categoriesAr), this.renderInput(\"age\", \"גיל\"), this.renderInput(\"tags\", \"תגיות\"), this.renderInput(\"price\", \"מחיר\", \"number\"), this.renderInput(\"sale\", \"מחיר מבצע\"), this.renderInput(\"image\", \"תמונה\"), this.renderButton(\"עדכן\"), /*#__PURE__*/_jsxDEV(Link, {\n                to: `/showProduct/${this.state.data.category}`,\n                className: \"btn\",\n                style: {\n                  backgroundColor: \"rgb(255, 196, 0)\",\n                  color: \"#0d0d61\",\n                  marginLeft: \"2px !important\"\n                },\n                children: [\"\\u05D7\\u05D6\\u05E8\\u05D4\", /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-undo-alt m-1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 95,\n                  columnNumber: 202\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 95,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default EditProduct;","map":{"version":3,"sources":["C:/Users/WIN 10/Desktop/Art-Work-git/client/src/comps/editProduct.jsx"],"names":["React","Form","PageHeader","productService","toast","Joi","Link","EditProduct","state","data","name","price","category","catalogNumber","age","description","image","sale","errors","categoriesAr","productId","schema","string","min","max","required","label","number","tags","componentDidMount","props","match","params","id","getProduct","setState","mapToViewModel","doSubmit","updateProduct","history","replace","product","toString","render","handleSubmit","renderInput","renderSelect","renderButton","backgroundColor","color","marginLeft"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,eAAjB;AACA,OAAOC,UAAP,MAAuB,oBAAvB;AACA,OAAOC,cAAP,MAA2B,4BAA3B;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,SAAQC,IAAR,QAAmB,kBAAnB;;;AAGA,MAAMC,WAAN,SAA0BN,IAA1B,CAA+B;AAAA;AAAA;AAAA,SAE3BO,KAF2B,GAEnB;AACJC,MAAAA,IAAI,EAAC;AAAEC,QAAAA,IAAI,EAAC,EAAP;AAAWC,QAAAA,KAAK,EAAC,EAAjB;AAAqBC,QAAAA,QAAQ,EAAC,EAA9B;AAAkCC,QAAAA,aAAa,EAAC,EAAhD;AAAoDC,QAAAA,GAAG,EAAC,EAAxD;AAA4DC,QAAAA,WAAW,EAAC,EAAxE;AAA4EC,QAAAA,KAAK,EAAC,EAAlF;AAAsFC,QAAAA,IAAI,EAAC;AAA3F,OADD;AAEJC,MAAAA,MAAM,EAAC;AAFH,KAFmB;AAAA,SAQ1BC,YAR0B,GAQX,CAAC,YAAD,EAAc,YAAd,EAA2B,aAA3B,EAAyC,UAAzC,EAAoD,YAApD,EAAiE,aAAjE,EAA+E,WAA/E,EAA2F,gBAA3F,EAA4G,gBAA5G,EAA6H,aAA7H,CARW;AAAA,SAU3BC,SAV2B,GAUhB,EAVgB;AAAA,SAa3BC,MAb2B,GAalB;AACLX,MAAAA,IAAI,EAACL,GAAG,CAACiB,MAAJ,GAAaC,GAAb,CAAiB,CAAjB,EAAoBC,GAApB,CAAwB,GAAxB,EAA6BC,QAA7B,GAAwCC,KAAxC,CAA8C,UAA9C,CADA;AAELf,MAAAA,KAAK,EAAEN,GAAG,CAACsB,MAAJ,GAAaJ,GAAb,CAAiB,CAAjB,EAAoBC,GAApB,CAAwB,MAAxB,EAAgCC,QAAhC,GAA2CC,KAA3C,CAAiD,MAAjD,CAFF;AAGLd,MAAAA,QAAQ,EAAEP,GAAG,CAACiB,MAAJ,GAAaC,GAAb,CAAiB,CAAjB,EAAoBC,GAApB,CAAwB,GAAxB,EAA6BC,QAA7B,GAAwCC,KAAxC,CAA8C,SAA9C,CAHL;AAILb,MAAAA,aAAa,EAAER,GAAG,CAACiB,MAAJ,GAAaC,GAAb,CAAiB,CAAjB,EAAoBC,GAApB,CAAwB,OAAxB,EAAiCC,QAAjC,GAA4CC,KAA5C,CAAkD,WAAlD,CAJV;AAKLX,MAAAA,WAAW,EAAEV,GAAG,CAACiB,MAAJ,GAAaC,GAAb,CAAiB,CAAjB,EAAoBC,GAApB,CAAwB,IAAxB,EAA8BE,KAA9B,CAAoC,MAApC,CALR;AAMLT,MAAAA,IAAI,EAAEZ,GAAG,CAACsB,MAAJ,GAAaJ,GAAb,CAAiB,CAAjB,EAAoBC,GAApB,CAAwB,MAAxB,EAAgCE,KAAhC,CAAsC,WAAtC,CAND;AAOLZ,MAAAA,GAAG,EAAET,GAAG,CAACiB,MAAJ,GAAaC,GAAb,CAAiB,CAAjB,EAAoBC,GAApB,CAAwB,EAAxB,EAA4BE,KAA5B,CAAkC,KAAlC,CAPA;AAQLV,MAAAA,KAAK,EAAEX,GAAG,CAACiB,MAAJ,GAAaC,GAAb,CAAiB,CAAjB,EAAoBC,GAApB,CAAwB,IAAxB,EAA8BE,KAA9B,CAAoC,OAApC,CARF;AASLE,MAAAA,IAAI,EAAEvB,GAAG,CAACiB,MAAJ,GAAaC,GAAb,CAAiB,CAAjB,EAAoBC,GAApB,CAAwB,IAAxB,EAA8BE,KAA9B,CAAoC,OAApC;AATD,KAbkB;;AAAA,SAyB/BG,iBAzB+B,GAyBX,YAAU;AACtB,WAAKT,SAAL,GAAiB,KAAKU,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBC,EAAzC;AACA,YAAM;AAAExB,QAAAA;AAAF,UAAW,MAAMN,cAAc,CAAC+B,UAAf,CAA0B,KAAKd,SAA/B,CAAvB;AACA,WAAKe,QAAL,CAAe;AAAE1B,QAAAA,IAAI,EAAE,KAAK2B,cAAL,CAAoB3B,IAApB;AAAR,OAAf;AAIH,KAhC0B;;AAAA,SAsD3B4B,QAtD2B,GAsDhB,YAAY;AACnB,YAAM;AAAC5B,QAAAA;AAAD,UAAS,KAAKD,KAApB;AACA,YAAML,cAAc,CAACmC,aAAf,CAA6B7B,IAA7B,EAAmC,KAAKW,SAAxC,CAAN;AACAhB,MAAAA,KAAK,CAAE,eAAF,CAAL;AACA,WAAK0B,KAAL,CAAWS,OAAX,CAAmBC,OAAnB,CAA4B,gBAAe/B,IAAI,CAACG,QAAS,EAAzD;AAEH,KA5D0B;AAAA;;AAmC3BwB,EAAAA,cAAc,CAACK,OAAD,EAAS;AACnB,WAAM;AACF/B,MAAAA,IAAI,EAAE+B,OAAO,CAAC/B,IADZ;AAEFC,MAAAA,KAAK,EAAE8B,OAAO,CAAC9B,KAFb;AAGFC,MAAAA,QAAQ,EAAE6B,OAAO,CAAC7B,QAHhB;AAIFgB,MAAAA,IAAI,EAAEa,OAAO,CAACb,IAJZ;AAKFd,MAAAA,GAAG,EAAE2B,OAAO,CAAC3B,GALX;AAMFD,MAAAA,aAAa,EAAE4B,OAAO,CAAC5B,aAAR,CAAsB6B,QAAtB,EANb;AAOF3B,MAAAA,WAAW,EAAE0B,OAAO,CAAC1B,WAPnB;AAQFC,MAAAA,KAAK,EAAEyB,OAAO,CAACzB,KARb;AASFC,MAAAA,IAAI,EAAEwB,OAAO,CAACxB;AATZ,KAAN;AAWH;;AAmBD0B,EAAAA,MAAM,GAAG;AACL,wBACI,QAAC,KAAD,CAAO,QAAP;AAAA,6BAEQ;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA,gCACG,QAAC,UAAD;AAAY,UAAA,SAAS,EAAC;AAAtB;AAAA;AAAA;AAAA;AAAA,gBADH,eAEQ;AAAK,UAAA,SAAS,EAAC,4BAAf;AAAA,iCACI;AAAK,YAAA,SAAS,EAAC,UAAf;AAAA,mCACI;AAAM,cAAA,QAAQ,EAAE,KAAKC,YAArB;AAAmC,cAAA,YAAY,EAAC,KAAhD;AAAsD,cAAA,MAAM,EAAC,MAA7D;AAAoE,cAAA,SAAS,EAAC,sBAA9E;AAAA,yBACK,KAAKC,WAAL,CAAiB,MAAjB,EAAyB,UAAzB,CADL,EAEK,KAAKA,WAAL,CAAiB,aAAjB,EAAgC,MAAhC,CAFL,EAGK,KAAKA,WAAL,CAAiB,eAAjB,EAAkC,WAAlC,EAA8C,QAA9C,CAHL,EAIK,KAAKC,YAAL,CAAkB,UAAlB,EAA6B,SAA7B,EAAwC,KAAK3B,YAA7C,CAJL,EAKK,KAAK0B,WAAL,CAAiB,KAAjB,EAAwB,KAAxB,CALL,EAMK,KAAKA,WAAL,CAAiB,MAAjB,EAAyB,OAAzB,CANL,EAOK,KAAKA,WAAL,CAAiB,OAAjB,EAA0B,MAA1B,EAAiC,QAAjC,CAPL,EAQK,KAAKA,WAAL,CAAiB,MAAjB,EAAyB,WAAzB,CARL,EASK,KAAKA,WAAL,CAAiB,OAAjB,EAA0B,OAA1B,CATL,EAUK,KAAKE,YAAL,CAAkB,MAAlB,CAVL,eAWA,QAAC,IAAD;AAAM,gBAAA,EAAE,EAAG,gBAAe,KAAKvC,KAAL,CAAWC,IAAX,CAAgBG,QAAS,EAAnD;AAAsD,gBAAA,SAAS,EAAC,KAAhE;AAAsE,gBAAA,KAAK,EAAE;AAACoC,kBAAAA,eAAe,EAAC,kBAAjB;AAAqCC,kBAAAA,KAAK,EAAC,SAA3C;AAAsDC,kBAAAA,UAAU,EAAC;AAAjE,iBAA7E;AAAA,oEAAqK;AAAG,kBAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,wBAArK;AAAA;AAAA;AAAA;AAAA;AAAA,sBAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBAFR;AAAA;AAAA;AAAA;AAAA;AAAA;AAFR;AAAA;AAAA;AAAA;AAAA,YADJ;AAyBC;;AA5FsB;;AA+F/B,eAAe3C,WAAf","sourcesContent":["import React from 'react';\r\nimport Form from './common/form';\r\nimport PageHeader from './common/pageHader';\r\nimport productService from '../services/productService';\r\nimport { toast } from 'react-toastify';\r\nimport Joi from \"joi-browser\";\r\nimport {Link} from 'react-router-dom';\r\n\r\n\r\nclass EditProduct extends Form {\r\n\r\n    state = { \r\n        data:{ name:\"\", price:\"\", category:\"\", catalogNumber:\"\", age:\"\", description:\"\", image:\"\", sale:\"\"},\r\n        errors:{ }\r\n\r\n     } \r\n\r\n     categoriesAr = ['ציורי הקסם','סרגלי הקסם','מדבקות הקסם','בניה מעץ','בניה מקאפה','מתיחת חוטים','מניאטורות','צביעה באקריליק','יצירות יהלומים','קישוטי סוכה'];\r\n\r\n    productId= \"\";\r\n\r\n\r\n    schema = {\r\n        name:Joi.string().min(2).max(255).required().label(\"שם המוצר\"),\r\n        price: Joi.number().min(1).max(100000).required().label(\"מחיר\"),\r\n        category: Joi.string().min(2).max(255).required().label(\"קטגוריה\"),\r\n        catalogNumber: Joi.string().min(1).max(2000000).required().label('מספר מק\"ט'),\r\n        description: Joi.string().min(2).max(1000).label(\"תאור\"),\r\n        sale: Joi.number().min(1).max(100000).label(\"מחיר מבצע\"),\r\n        age: Joi.string().min(1).max(10).label(\"גיל\"),\r\n        image: Joi.string().min(2).max(1000).label(\"תמונה\"),\r\n        tags: Joi.string().min(2).max(1000).label(\"תגיות\")\r\n    }\r\n\r\ncomponentDidMount = async() =>{\r\n        this.productId = this.props.match.params.id;\r\n        const { data } = await productService.getProduct(this.productId);\r\n        this.setState ({ data: this.mapToViewModel(data) });\r\n    \r\n        \r\n\r\n    }\r\n\r\n    \r\n    mapToViewModel(product){\r\n        return{\r\n            name: product.name,\r\n            price: product.price,\r\n            category: product.category,\r\n            tags: product.tags,\r\n            age: product.age,\r\n            catalogNumber: product.catalogNumber.toString(),\r\n            description: product.description,\r\n            image: product.image,\r\n            sale: product.sale\r\n        };\r\n    }\r\n\r\n    \r\n\r\n    \r\n\r\n\r\n    doSubmit = async () => {\r\n        const {data} = this.state;\r\n        await productService.updateProduct(data, this.productId);\r\n        toast( 'המוצר עודכן !');\r\n        this.props.history.replace(`/showProduct/${data.category}`);\r\n\r\n    } \r\n\r\n    \r\n\r\n    \r\n\r\n    render() { \r\n        return ( \r\n            <React.Fragment>\r\n                \r\n                    <div className=\"container\">\r\n                       <PageHeader titleText=\"עדכון מוצר\"/>\r\n                            <div className=\"row justify-content-center\">\r\n                                <div className=\"col-lg-6\">\r\n                                    <form onSubmit={this.handleSubmit} autoComplete=\"off\" method=\"post\" className=\"form-control mt-3 h2\">\r\n                                        {this.renderInput(\"name\", \"שם המוצר\")}\r\n                                        {this.renderInput(\"description\", \"תאור\")}\r\n                                        {this.renderInput(\"catalogNumber\", 'מספר מק\"ט',\"number\" )}\r\n                                        {this.renderSelect(\"category\",\"קטגוריה\", this.categoriesAr)}\r\n                                        {this.renderInput(\"age\", \"גיל\")}\r\n                                        {this.renderInput(\"tags\", \"תגיות\")}\r\n                                        {this.renderInput(\"price\", \"מחיר\",\"number\")}\r\n                                        {this.renderInput(\"sale\", \"מחיר מבצע\")}\r\n                                        {this.renderInput(\"image\", \"תמונה\")}\r\n                                        {this.renderButton(\"עדכן\")}\r\n                                    <Link to={`/showProduct/${this.state.data.category}`} className=\"btn\" style={{backgroundColor:\"rgb(255, 196, 0)\", color:\"#0d0d61\", marginLeft:\"2px !important\"}}>חזרה<i className=\"fas fa-undo-alt m-1\"></i></Link>\r\n                               </form>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </React.Fragment>\r\n            );\r\n        }\r\n}\r\n \r\nexport default EditProduct"]},"metadata":{},"sourceType":"module"}