{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\WIN 10\\\\Desktop\\\\Art-Work-git\\\\client\\\\src\\\\comps\\\\addProduct.jsx\";\nimport React from 'react';\nimport Joi from \"joi-browser\";\nimport Form from './common/form';\nimport PageHeader from './common/pageHader';\nimport { toast } from 'react-toastify';\nimport productService from '../services/productService';\nimport http from '../services/httpService';\nimport { apiUrl } from \"../config.json\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass AddProduct extends Form {\n  constructor(...args) {\n    super(...args);\n    this.categoriesAr = ['ציורי הקסם', 'סרגלי הקסם', 'מדבקות הקסם', 'בניה מעץ', 'בניה מקאפה', 'מתיחת חוטים', 'מניאטורות', 'צביעה באקריליק', 'יצירות יהלומים', 'קישוטי סוכה'];\n    this.state = {\n      data: {\n        name: \"\",\n        price: \"\",\n        category: \"\",\n        catalogNumber: \"\",\n        description: \"\",\n        tags: \"\",\n        age: \"\"\n      },\n      errors: {},\n      image: \"\"\n    };\n    this.schema = {\n      name: Joi.string().min(2).max(255).required().label(\"שם המוצר\"),\n      price: Joi.number().min(1).max(100000).required().label(\"מחיר\"),\n      category: Joi.string().min(2).max(255).required().invalid('בחר').label(\"קטגוריה\"),\n      catalogNumber: Joi.string().min(1).max(2000000).required().label('מספר מק\"ט'),\n      description: Joi.string().min(2).max(1000).label(\"תאור\"),\n      tags: Joi.string().label(\"תגיות\"),\n      age: Joi.string().label(\"גיל\"),\n      sale: Joi.number().min(2).max(100000).label(\"מחיר מבצע\"),\n      image: Joi.string().min(2).max(1000).label(\"תמונה\")\n    };\n\n    this.doSubmit = async () => {\n      const {\n        data\n      } = this.state;\n\n      try {\n        await productService.addProduct(data);\n        toast('המוצר התווסף בהצלחה!');\n        this.props.history.push(`/showProduct/${data.category}`);\n      } catch (ex) {\n        if (ex.response && ex.response.status === 409) {\n          this.setState({\n            errors: {\n              catalogNumber: 'מספר מק\"ט קיים'\n            }\n          });\n        }\n      }\n    };\n\n    this.sendImage = async image => {\n      const fd = new FormData();\n      fd.append(`image`, image);\n      const config = {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      };\n\n      try {\n        const res = await http.post(`${apiUrl}/images`, fd, config);\n        console.log(res.data);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n  }\n\n  handleImageUpload() {\n    this.setState({\n      image: URL.createObjectURL()\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(PageHeader, {\n          titleText: \"\\u05D4\\u05D5\\u05E1\\u05E4\\u05EA \\u05DE\\u05D5\\u05E6\\u05E8\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row justify-content-center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-lg-6\",\n            children: /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: this.handleSubmit,\n              autoComplete: \"off\",\n              method: \"post\",\n              className: \"form-control mt-3 h2\",\n              enctype: \"multipart/form-data\",\n              action: \"/upload\",\n              children: [this.renderInput(\"name\", \"שם המוצר\"), this.renderInput(\"description\", \"תאור\"), this.renderSelect(\"category\", \"קטגוריה\", this.categoriesAr), this.renderInput(\"catalogNumber\", 'מספר מק\"ט', \"number\"), this.renderInput(\"age\", 'גיל'), this.renderInput(\"price\", \"מחיר\", \"number\"), this.renderInput(\"tags\", \"תגיות\"), this.renderInput(\"sale\", \"מחיר מבצע\"), this.renderInput(\"image\", \"תמונה\"), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                name: \"file\",\n                onChange: this.handleImageUpload,\n                accept: \"png jpg jpeg\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 95,\n                columnNumber: 37\n              }, this), this.renderButton(\"הוסף\")]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default AddProduct;","map":{"version":3,"sources":["C:/Users/WIN 10/Desktop/Art-Work-git/client/src/comps/addProduct.jsx"],"names":["React","Joi","Form","PageHeader","toast","productService","http","apiUrl","AddProduct","categoriesAr","state","data","name","price","category","catalogNumber","description","tags","age","errors","image","schema","string","min","max","required","label","number","invalid","sale","doSubmit","addProduct","props","history","push","ex","response","status","setState","sendImage","fd","FormData","append","config","headers","res","post","console","log","err","handleImageUpload","URL","createObjectURL","render","handleSubmit","renderInput","renderSelect","renderButton"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Joi from \"joi-browser\";\r\nimport Form from './common/form';\r\nimport PageHeader from './common/pageHader';\r\nimport { toast } from 'react-toastify';\r\nimport productService from '../services/productService';\r\nimport http from '../services/httpService';\r\nimport { apiUrl} from \"../config.json\"\r\n\r\n\r\nclass AddProduct extends Form {\r\n\r\n    categoriesAr = ['ציורי הקסם','סרגלי הקסם','מדבקות הקסם','בניה מעץ','בניה מקאפה','מתיחת חוטים','מניאטורות','צביעה באקריליק','יצירות יהלומים','קישוטי סוכה'];\r\n\r\n    state = { \r\n        data:{name:\"\", price:\"\", category:\"\", catalogNumber:\"\", description:\"\", tags:\"\", age:\"\"},\r\n        errors:{ },\r\n        image:\"\"\r\n     }\r\n\r\n    schema = {\r\n        name:Joi.string().min(2).max(255).required().label(\"שם המוצר\"),\r\n        price: Joi.number().min(1).max(100000).required().label(\"מחיר\"),\r\n        category: Joi.string().min(2).max(255).required().invalid('בחר').label(\"קטגוריה\"),\r\n        catalogNumber: Joi.string().min(1).max(2000000).required().label('מספר מק\"ט'),\r\n        description: Joi.string().min(2).max(1000).label(\"תאור\"),\r\n        tags: Joi.string().label(\"תגיות\"),\r\n        age: Joi.string().label(\"גיל\"),\r\n        sale: Joi.number().min(2).max(100000).label(\"מחיר מבצע\"),\r\n        image: Joi.string().min(2).max(1000).label(\"תמונה\")\r\n    }\r\n\r\n    \r\n\r\n    doSubmit = async() => {\r\n        const { data } = this.state;\r\n        try{\r\n        await productService.addProduct(data);\r\n        toast('המוצר התווסף בהצלחה!');\r\n        this.props.history.push(`/showProduct/${data.category}`);\r\n        }\r\n        catch(ex){\r\n            if (ex.response  && ex.response.status === 409){\r\n                this.setState({ errors:{catalogNumber: 'מספר מק\"ט קיים'}});\r\n            }\r\n        }\r\n    }\r\n        \r\n\r\n    handleImageUpload (){\r\n        this.setState({image: URL.createObjectURL()})\r\n    \r\n    }\r\n    \r\n    \r\n    sendImage = async (image) => {\r\n        const fd = new FormData();\r\n        fd.append(`image`, image);\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data'\r\n            }\r\n        }\r\n            try{\r\n                const res = await http.post(`${apiUrl}/images`, fd, config);\r\n                console.log(res.data);\r\n            } catch(err){\r\n                console.log(err);\r\n            }\r\n        }\r\n        \r\n    \r\n\r\n    render() { \r\n\r\n \r\n\r\n        return ( \r\n            <React.Fragment>\r\n                <div className=\"container\">\r\n                    <PageHeader titleText=\"הוספת מוצר\"/>\r\n                        <div className=\"row justify-content-center\">\r\n                            <div className=\"col-lg-6\">\r\n                                    \r\n                                <form onSubmit={this.handleSubmit} autoComplete=\"off\" method=\"post\" className=\"form-control mt-3 h2\" enctype=\"multipart/form-data\" action=\"/upload\">\r\n                                    {this.renderInput(\"name\", \"שם המוצר\")}\r\n                                    {this.renderInput(\"description\", \"תאור\")}\r\n                                    {this.renderSelect(\"category\",\"קטגוריה\", this.categoriesAr)}\r\n                                    {this.renderInput(\"catalogNumber\", 'מספר מק\"ט',\"number\" )}\r\n                                    {this.renderInput(\"age\", 'גיל' )}\r\n                                    {this.renderInput(\"price\", \"מחיר\",\"number\")}\r\n                                    {this.renderInput(\"tags\", \"תגיות\")}\r\n                                    {this.renderInput(\"sale\", \"מחיר מבצע\")}\r\n                                    {this.renderInput(\"image\", \"תמונה\")}\r\n                                    <input type=\"file\" name=\"file\" onChange={this.handleImageUpload} accept=\"png jpg jpeg\"/>\r\n                                    {this.renderButton(\"הוסף\")}\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </React.Fragment>\r\n        );\r\n    }\r\n}\r\n \r\nexport default AddProduct"]},"metadata":{},"sourceType":"module"}