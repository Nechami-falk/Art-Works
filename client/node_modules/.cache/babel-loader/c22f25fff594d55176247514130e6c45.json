{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\WIN 10\\\\Desktop\\\\Art-Work-git\\\\client\\\\src\\\\comps\\\\showProduct.jsx\";\nimport React, { Component } from 'react';\nimport Product from './product';\nimport productService from '../services/productService';\nimport { toast } from 'react-toastify';\nimport PageHeader from './common/pageHader';\nimport http from \"../services/httpService\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass ShowProduct extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      category: \"\",\n      products: [],\n      userCart: [],\n      counterProduct: 0,\n      search: \"\"\n    };\n\n    this.componentDidMount = async () => {\n      let categoryParams = this.props.match.params.name;\n      let querySerch = this.props.location.search;\n\n      if (categoryParams) {\n        this.setState({\n          category: categoryParams\n        });\n        const {\n          data\n        } = await productService.getCategoryProduct(categoryParams);\n        this.setState({\n          products: data,\n          search: \"\"\n        });\n      } else {\n        const queryName = new URLSearchParams(querySerch).get(\"search\");\n        this.setState({\n          search: queryName\n        });\n        const {\n          data\n        } = await productService.getSearchProduct(queryName);\n        this.setState({\n          products: data,\n          category: \"\"\n        });\n\n        if (this.state.products.length < 1) {\n          this.getDemoProduct();\n        }\n      }\n    };\n\n    this.getDemoProduct = async () => {\n      let products = await http.get('http://localhost:8181/data/product');\n      this.setState({\n        data: products\n      });\n      console.log(products);\n    };\n\n    this.componentDidUpdate = async () => {\n      let categoryParams = this.props.match.params.name;\n      const queryName = new URLSearchParams(this.props.location.search).get(\"search\");\n\n      if (this.state.category !== categoryParams && categoryParams) {\n        return this.componentDidMount();\n      }\n\n      if (this.state.search !== queryName && this.props.location.search) {\n        return this.componentDidMount();\n      }\n    };\n\n    this.getCounter = count => {\n      let counter = count;\n      this.setState({\n        counterProduct: counter\n      });\n    };\n\n    this.onSerch = async () => {\n      let {\n        value\n      } = this.state;\n      const {\n        data\n      } = await productService.onMySerch(value);\n      this.setState({\n        products: data\n      });\n    };\n\n    this.onAddNewProduct = product => {\n      let counterProduct = this.state.counterProduct;\n      let newProduct = {\n        product: product,\n        quantity: counterProduct\n      };\n      let localstorgeCart = JSON.parse(localStorage.getItem(\"your-cart\")) || [];\n      localstorgeCart = localstorgeCart.filter(p => p.product._id !== newProduct.product._id);\n      localstorgeCart.push(newProduct);\n      localStorage.setItem(\"your-cart\", JSON.stringify(localstorgeCart));\n      toast.success(\"המוצר נוסף  לסל בהצלחה!\");\n    };\n\n    this.onDeleteProduct = async productId => {\n      let products = [...this.state.products];\n      products = products.filter(product => product._id !== productId);\n      this.setState({\n        products: products\n      });\n      await productService.deleteProduct(productId);\n      toast('המוצר נמחק בהצלחה!');\n    };\n  }\n\n  render() {\n    const {\n      products\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(PageHeader, {\n          titleText: this.state.category || products.length > 0 && this.state.search\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 17\n        }, this), (!products || !products.length) && /*#__PURE__*/_jsxDEV(PageHeader, {\n          titleText: \"\\u05DC\\u05D0 \\u05E0\\u05DE\\u05E6\\u05D0\\u05D5 \\u05DE\\u05D5\\u05E6\\u05E8\\u05D9\\u05DD \\u05DE\\u05EA\\u05D0\\u05D9\\u05DE\\u05D9\\u05DD \\u05DC\\u05D7\\u05D9\\u05E4\\u05D5\\u05E9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 56\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: products.map(product => /*#__PURE__*/_jsxDEV(Product, {\n              product: product,\n              onDeleteProduct: this.onDeleteProduct,\n              onAddNewProduct: this.onAddNewProduct,\n              getCounter: this.getCounter,\n              counterProduct: this.state.counterProduct\n            }, product._id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 49\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 16\n    }, this);\n  }\n\n}\n\nexport default ShowProduct;","map":{"version":3,"sources":["C:/Users/WIN 10/Desktop/Art-Work-git/client/src/comps/showProduct.jsx"],"names":["React","Component","Product","productService","toast","PageHeader","http","ShowProduct","state","category","products","userCart","counterProduct","search","componentDidMount","categoryParams","props","match","params","name","querySerch","location","setState","data","getCategoryProduct","queryName","URLSearchParams","get","getSearchProduct","length","getDemoProduct","console","log","componentDidUpdate","getCounter","count","counter","onSerch","value","onMySerch","onAddNewProduct","product","newProduct","quantity","localstorgeCart","JSON","parse","localStorage","getItem","filter","p","_id","push","setItem","stringify","success","onDeleteProduct","productId","deleteProduct","render","map"],"mappings":"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","sourcesContent":["import React , { Component }from 'react';\r\nimport Product from './product';\r\nimport productService from '../services/productService';\r\nimport { toast } from 'react-toastify';\r\nimport PageHeader from './common/pageHader';\r\nimport http from \"../services/httpService\";\r\n\r\n\r\nclass ShowProduct extends Component {\r\n\r\n   \r\n\r\n\r\n    state = {\r\n        category :\"\",\r\n       products:[],\r\n       userCart:[],\r\n       counterProduct:0,\r\n       search:\"\"\r\n    }\r\n\r\n\r\n\r\n    componentDidMount = async () =>  {\r\n        \r\n        let categoryParams  = this.props.match.params.name;\r\n        let querySerch = this.props.location.search;\r\n        \r\n        if (categoryParams){\r\n        this.setState({category: categoryParams});\r\n        const { data }  = await productService.getCategoryProduct (categoryParams);\r\n        this.setState({products:data, search:\"\"});\r\n    } \r\n    else{\r\n        const queryName =  new URLSearchParams(querySerch).get(\"search\");\r\n        this.setState({search:queryName});\r\n        const { data } = await productService.getSearchProduct(queryName);\r\n        this.setState({products:data, category:\"\"});\r\n        \r\n        if( this.state.products.length < 1){\r\n            this.getDemoProduct()\r\n        }\r\n    }\r\n}\r\n\r\n\r\n    getDemoProduct = async ()=>{\r\n            let products = await http.get('http://localhost:8181/data/product');\r\n            this.setState({data:products});\r\n              console.log(products);\r\n            \r\n          }\r\n\r\n\r\n\r\n        componentDidUpdate = async() =>{\r\n        let categoryParams  = this.props.match.params.name;\r\n        const queryName =  new URLSearchParams(this.props.location.search).get(\"search\");\r\n        if (this.state.category !== categoryParams && categoryParams){\r\n            return this.componentDidMount();\r\n        }\r\n\r\n        if ( this.state.search !== queryName && this.props.location.search){\r\n            return this.componentDidMount();\r\n        }\r\n\r\n    \r\n    } \r\n   \r\n    getCounter = (count) => {\r\n        let counter = count;\r\n        this.setState({counterProduct:counter});\r\n    }\r\n\r\n    onSerch = async()=> {\r\n        let {value} = this.state;\r\n        const {data} = await productService.onMySerch(value);\r\n        this.setState({products:data})\r\n  \r\n      }\r\n    \r\n    onAddNewProduct = (product) => {\r\n        let counterProduct = this.state.counterProduct;\r\n        let newProduct={\r\n            product:product,\r\n            quantity:counterProduct\r\n        }\r\n        let localstorgeCart=JSON.parse(localStorage.getItem(\"your-cart\")) || [];\r\n        localstorgeCart = localstorgeCart.filter( p => p.product._id !== newProduct.product._id);\r\n        localstorgeCart.push(newProduct);\r\n        localStorage.setItem(\"your-cart\", JSON.stringify(localstorgeCart));\r\n        toast.success(\"המוצר נוסף  לסל בהצלחה!\");\r\n        \r\n\r\n    }\r\n\r\n        onDeleteProduct  = async (productId)=> {\r\n        let products = [...this.state.products];\r\n        products = products.filter(product => product._id !== productId);\r\n        this.setState({products:products});\r\n        await productService.deleteProduct(productId);\r\n        toast('המוצר נמחק בהצלחה!');\r\n        \r\n    }\r\n\r\n    render() { \r\n        \r\n        const { products } = this.state;\r\n        \r\n\r\n        return <div>\r\n            <div className=\"container\">\r\n                <PageHeader titleText={this.state.category || (products.length > 0  && this.state.search)}/>\r\n                 {( !products || !products.length ) && <PageHeader titleText =\"לא נמצאו מוצרים מתאימים לחיפוש\"/>}\r\n                <div className=\"row\">\r\n                <div>{products.map( product => (<Product key={product._id} product={product} onDeleteProduct={this.onDeleteProduct} onAddNewProduct={this.onAddNewProduct} getCounter={this.getCounter} counterProduct={this.state.counterProduct}/>))}</div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>;\r\n    }\r\n}\r\n \r\nexport default ShowProduct;"]},"metadata":{},"sourceType":"module"}